{
  "hash": "7a178aa46f02ff50da4fb567273186e7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Blog Post 6\"\nauthor: \"Team 6\"\ndate: \"2025-04-14\"\ndate-modified: \"2025-04-14\"\ndraft: FALSE\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLinking to GEOS 3.13.0, GDAL 3.8.5, PROJ 9.5.1; sf_use_s2() is TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\ncombined_data <- readRDS(\"dataset/combined_nypd_acs_with_coords_fixed.rds\")\nnyc_map <- st_read(\"dataset/nybb.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `nybb' from data source \n  `/Users/martin/Downloads/BU/SPRING 2025/MA 415/Team 6/dataset/nybb.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 5 features and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 913175.1 ymin: 120128.4 xmax: 1067383 ymax: 272844.3\nProjected CRS: NAD83 / New York Long Island (ftUS)\n```\n\n\n:::\n:::\n\n\n\nArrest Count by Borough\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data %>%\n  count(arrest_boro) %>%\n  ggplot(aes(x = reorder(arrest_boro, -n), y = n, fill = arrest_boro)) +\n  geom_col() +\n  labs(title = \"Total Arrests by Borough in 2024\", x = \"Borough\", y = \"Number of Arrests\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](blog-post-6_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\nArrests vs. Unemployment Rate\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data %>%\n  count(arrest_boro) %>%\n  left_join(distinct(combined_data, arrest_boro, unemployment_rate), by = \"arrest_boro\") %>%\n  ggplot(aes(x = unemployment_rate, y = n, label = arrest_boro)) +\n  geom_point(size = 4, color = \"steelblue\") +\n  geom_text(vjust = -1) +\n  labs(title = \"Arrests vs Unemployment Rate by Borough\",\n       x = \"Unemployment Rate (%)\", y = \"Number of Arrests\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](blog-post-6_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nArrests by Race and Sex\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data %>%\n  count(arrest_boro, perp_race) %>%\n  ggplot(aes(x = arrest_boro, y = n, fill = perp_race)) +\n  geom_col(position = \"dodge\") +\n  labs(title = \"Arrests by Borough and Race\", x = \"Borough\", y = \"Number of Arrests\", fill = \"Race\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](blog-post-6_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\ncombined_data %>%\n  count(arrest_boro, perp_sex) %>%\n  ggplot(aes(x = arrest_boro, y = n, fill = perp_sex)) +\n  geom_col(position = \"dodge\") +\n  labs(title = \"Arrests by Borough and Sex\", x = \"Borough\", y = \"Number of Arrests\", fill = \"Sex\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](blog-post-6_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n:::\n\n\n\nTop Offense Types in High vs Low Unemployment Areas\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_data %>%\n  distinct(arrest_boro, unemployment_rate) %>%\n  mutate(unemployment_level = ifelse(unemployment_rate >= median(unemployment_rate, na.rm = TRUE),\n                                     \"High Unemployment\", \"Low Unemployment\")) -> boro_unemp_group\n\ncombined_data %>%\n  left_join(boro_unemp_group, by = \"arrest_boro\") %>%\n  count(unemployment_level, ofns_desc) %>%\n  group_by(unemployment_level) %>%\n  mutate(prop = n / sum(n)) %>%\n  slice_max(prop, n = 10, with_ties = FALSE) %>%\n  ggplot(aes(x = reorder(ofns_desc, prop), y = prop, fill = unemployment_level)) +\n  geom_col(position = \"dodge\") +\n  coord_flip() +\n  labs(title = \"Top Offense Types in High vs Low Unemployment Boroughs\",\n       x = \"Offense Description\", y = \"Proportion\", fill = \"Unemployment Level\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](blog-post-6_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\nArrest Map - Colored by Race\n\n\n::: {.cell}\n\n```{.r .cell-code}\narrest_points <- combined_data %>%\n  filter(!is.na(longitude), !is.na(latitude)) %>%\n  st_as_sf(coords = c(\"longitude\", \"latitude\"), crs = 4326, remove = FALSE)\n\nset.seed(42)\nplot_data <- arrest_points %>% sample_n(3000)\n\nggplot() +\n  geom_sf(data = nyc_map, fill = \"gray95\", color = \"black\") +\n  geom_sf(data = plot_data, aes(color = perp_race), size = 1, alpha = 0.6) +\n  labs(title = \"Arrest Locations in NYC (2024)\",\n       subtitle = \"Each point represents an arrest. Colored by race.\",\n       color = \"Race\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](blog-post-6_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(sf)\n\ncombined_data <- readRDS(\"dataset/combined_nypd_acs_with_coords_fixed.rds\")\nnyc_map <- st_read(\"dataset/nybb.shp\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nReading layer `nybb' from data source \n  `/Users/martin/Downloads/BU/SPRING 2025/MA 415/Team 6/dataset/nybb.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 5 features and 4 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 913175.1 ymin: 120128.4 xmax: 1067383 ymax: 272844.3\nProjected CRS: NAD83 / New York Long Island (ftUS)\n```\n\n\n:::\n\n```{.r .cell-code}\ncombined_data <- combined_data %>%\n  mutate(unemployment_rate = as.numeric(unemployment_rate))\n\nborough_unemp <- combined_data %>%\n  group_by(borough) %>%\n  summarise(unemployment_rate = mean(unemployment_rate, na.rm = TRUE))\n\nnyc_map <- nyc_map %>%\n  mutate(borough = case_when(\n    BoroName == \"Manhattan\" ~ \"MANHATTAN\",\n    BoroName == \"Brooklyn\" ~ \"BROOKLYN\",\n    BoroName == \"Queens\" ~ \"QUEENS\",\n    BoroName == \"Bronx\" ~ \"BRONX\",\n    BoroName == \"Staten Island\" ~ \"STATEN ISLAND\"\n  )) %>%\n  left_join(borough_unemp %>% select(borough, unemployment_rate), by = \"borough\") %>%\n  select(-matches(\"^unemployment_rate\\\\..*\"))\n\narrest_points <- combined_data %>%\n  filter(!is.na(longitude), !is.na(latitude)) %>%\n  st_as_sf(coords = c(\"longitude\", \"latitude\"), crs = 4326, remove = FALSE)\n\nset.seed(42)\nplot_data <- arrest_points %>% sample_n(3000)\n\nggplot() +\n  geom_sf(data = nyc_map, aes(fill = unemployment_rate), color = \"white\") +\n  scale_fill_gradient(low = \"lightyellow\", high = \"darkred\", na.value = \"grey80\") +\n  geom_sf(data = plot_data, aes(color = perp_race), size = 1, alpha = 0.6) +\n  labs(\n    title = \"NYC Arrest Locations Overlaid on Borough Unemployment Rates (2024)\",\n    subtitle = \"Boroughs shaded by unemployment rate. Points show arrests colored by race.\",\n    fill = \"Unemployment Rate (%)\",\n    color = \"Race\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](blog-post-6_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "blog-post-6_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}